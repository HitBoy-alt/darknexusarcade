document.addEventListener("DOMContentLoaded", () => {
  // === Tab Switching ===
  const navButtons = document.querySelectorAll("nav button");
  const panels = document.querySelectorAll(".content-panel");

  navButtons.forEach(button => {
    button.addEventListener("click", () => {
      navButtons.forEach(btn => btn.classList.remove("active"));
      button.classList.add("active");
      panels.forEach(panel => panel.classList.remove("active"));
      const targetPanel = document.getElementById("content-" + button.dataset.target);
      if (targetPanel) targetPanel.classList.add("active");

      // Hide viewer when changing sections
      document.getElementById("viewer").style.display = "none";
    });
  });

  // === Click to Load in Viewer ===
  const items = document.querySelectorAll(".item");
  const viewer = document.getElementById("viewer");
  const viewerFrame = document.getElementById("viewerFrame");

  items.forEach(item => {
    item.addEventListener("click", () => {
      const url = item.dataset.url;
      if (url) {
        viewer.style.display = "block";
        viewerFrame.src = url;
      }
    });
  });

  // === Viewer Count ===
  if (!sessionStorage.viewerCount) {
    sessionStorage.viewerCount = Math.floor(Math.random() * 500) + 1;
  }

  const counter = document.getElementById("viewerCounter");
  if (counter) {
    counter.textContent = sessionStorage.viewerCount;
  }
});
